<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Quản lý Chủ nhà hàng</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      background-color: #f8f9fa;
      font-family: 'Roboto', sans-serif;
    }
    .navbar {
      box-shadow: 0 2px 4px rgba(0,0,0,.08);
    }
    .table-container {
      background-color: #ffffff;
      padding: 2rem;
      border-radius: 0.75rem;
      box-shadow: 0 4px 8px rgba(0,0,0,.05);
    }
    .table thead {
      background-color: #343a40;
      color: #ffffff;
    }
    .btn-action {
      margin: 0 2px;
      width: 38px; /* Fixed width for alignment */
    }
  </style>
</head>
<body>

<!-- Sử dụng Navbar Fragment -->
<div th:replace="~{admin/fragments/navbar :: navbar}"></div>

<!-- Main Content -->
<main class="container mt-4">
  <div class="table-container">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h1 class="h3 mb-0">Danh sách Chủ nhà hàng</h1>
      <a href="#" class="btn btn-primary">
        <i class="fas fa-plus me-1"></i> Thêm mới
      </a>
    </div>

    <div th:if="${owners.isEmpty()}">
      <div class="alert alert-info" role="alert">
        Chưa có chủ nhà hàng nào được đăng ký.
      </div>
    </div>

    <div th:if="${!owners.isEmpty()}">
      <div class="table-responsive">
        <table class="table table-hover align-middle">
          <thead>
          <tr>
            <th scope="col">ID</th>
            <th scope="col">Họ và Tên</th>
            <th scope="col">Username</th>
            <th scope="col">Email</th>
            <th scope="col">Trạng thái Cửa hàng</th>
            <th scope="col" class="text-center">Thao tác</th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="owner : ${owners}" th:with="restaurant=${restaurantMap[owner.id]}">
            <th scope="row" th:text="${owner.id}"></th>
            <td th:text="${owner.fullName}"></td>
            <td th:text="${owner.username}"></td>
            <td th:text="${owner.email}"></td>
            <td>
              <!-- Hiển thị trạng thái dựa trên dữ liệu từ restaurantMap -->
              <div th:if="${restaurant != null}">
                <span th:if="${restaurant.is_locked}" class="badge bg-danger">Đã bị khóa</span>
                <span th:unless="${restaurant.is_locked}" class="badge bg-success">Đang hoạt động</span>
              </div>
              <div th:unless="${restaurant != null}">
                <span class="badge bg-secondary">Chưa có</span>
              </div>
            </td>
            <td class="text-center">
              <a th:href="@{/admin/owner/{id}(id=${owner.id})}" class="btn btn-sm btn-success btn-action" title="Xem Chi Tiết">
                <i class="fas fa-eye"></i>
              </a>
              <a href="#" class="btn btn-sm btn-info btn-action" title="Sửa">
                <i class="fas fa-edit"></i>
              </a>
              <a href="#" class="btn btn-sm btn-danger btn-action" title="Xóa">
                <i class="fas fa-trash"></i>
              </a>
              <a href="@/admin/" class="btn btn-sm btn-warning btn-action" title="Khóa/Mở khóa Nhà hàng">
                <i class="fas fa-store-slash"></i>
              </a>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
